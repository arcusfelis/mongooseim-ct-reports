<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>/home/travis/build/esl/MongooseIM/apps/ejabberd/logs/ct_run.test@testing-gce-4af5a4df-257c-4357-9ff9-0b8db35e347e.c.eco-emissary-99515.internal.2016-01-26_09.42.04/ejabberd_binary.COVER.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /home/travis/build/esl/MongooseIM/apps/ejabberd/ebin/../src/ejabberd_binary.erl by COVER 2016-01-26 at 09:42:30

****************************************************************************

        |  -module(ejabberd_binary).
        |  
        |  -export([string_to_binary/1]).
        |  -export([join/2]).
        |  
        |  
        |  -spec string_to_binary(binary() | list()) -&gt; binary().
        |  string_to_binary(S) when is_list(S) -&gt;
        |      % If list is in Erlang representation of Unicode, we must use `unicode` module
        |      % If it's not or is already converted, we must use list_to_binary
        |      % since input can be from `file:consult/1` and prior to 17.0
        |      % this function returned bytes in a list instead of proper unicode string
        |      % so it is already like after a call to `unicode`.
<font color=red>     0..|      case lists:any(fun(C) -&gt; C &gt; 255 end, S) of</font>
<font color=red>     0..|          true -&gt; unicode:characters_to_binary(S);</font>
<font color=red>     0..|          false -&gt; list_to_binary(S)</font>
        |      end;
        |  string_to_binary(B) when is_binary(B) -&gt;
<font color=red>     0..|      B.</font>
        |  
        |  
        |  join([], _) -&gt;
<font color=red>     0..|      &lt;&lt;&gt;&gt;;</font>
        |  join([Part], _) -&gt;
<font color=red>     0..|      Part;</font>
        |  join(Parts, Sep) -&gt;
<font color=red>     0..|      iolist_to_binary(do_join(Parts, Sep, [])).</font>
        |  
        |  do_join([Part], _, Acc) -&gt;
<font color=red>     0..|      lists:reverse([Part | Acc]);</font>
        |  do_join([Part | Rest], Sep, Acc) -&gt;
<font color=red>     0..|      do_join(Rest, Sep, [Sep, Part | Acc]).</font>
</pre>
</body>
</html>
